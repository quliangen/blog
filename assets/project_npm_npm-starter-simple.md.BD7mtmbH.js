import{_ as i,o as a,c as l,ae as t}from"./chunks/framework.h0LyDJ8h.js";const e="/blog/assets/starter-simple-use-btn.gMBtetxf.png",n="/blog/assets/starter-simple-create-repo.BnJAfWPS.png",p="/blog/assets/starter-simple-step.BwA-5eWt.png",F=JSON.parse('{"title":"如何开发 NPM 包 ？","description":"","frontmatter":{},"headers":[],"relativePath":"project/npm/npm-starter-simple.md","filePath":"project/npm/npm-starter-simple.md"}'),h={name:"project/npm/npm-starter-simple.md"};function k(r,s,o,d,c,g){return a(),l("div",null,[...s[0]||(s[0]=[t('<h1 id="如何开发-npm-包" tabindex="-1">如何开发 NPM 包 ？ <a class="header-anchor" href="#如何开发-npm-包" aria-label="Permalink to &quot;如何开发 NPM 包 ？&quot;">​</a></h1><p>如何开发npm包 ？</p><p>第一次接到开发 NPM 包需求时，整个人有点懵，于是 CSDN、掘金、思否、知乎、简书，搜到很多文章，选了一些觉得靠谱的文章就开干了，殊不知工程化之旅就此展开。</p><p>完整流程包括：初始化项目 =&gt; 工程化配置 =&gt; 开发功能 =&gt; 调试 =&gt; 测试 =&gt; 发布。</p><p>实际开发过程中，把每个环节涉及的知识都了解清楚，还是非常耗费时间精力的。当时项目时间充裕，就一步步搞下来，也确实学到很多知识。当然这篇文章并不会讲解这些细节的。讲什么呢？</p><p>如果把这个问题本身看做一个需求，核心是开发一个包，包相关的工程化是纯技术需求。</p><p>对于没有相关基建沉淀的团队/个人建议这么做：</p><ul><li>使用优秀开源起手项目模板，优先支持核心需求开发</li><li>完成业务需求后，再深入学习起手项目相关工程化配置</li></ul><p>推荐：起手项目</p><ul><li>⭐️⭐️⭐️ <a href="https://github.com/antfu/starter-ts" target="_blank" rel="noreferrer">@antfu/starter-ts</a></li></ul><h2 id="具体步骤" tabindex="-1">具体步骤 <a class="header-anchor" href="#具体步骤" aria-label="Permalink to &quot;具体步骤&quot;">​</a></h2><h3 id="一-初始化项目" tabindex="-1">一. 初始化项目 <a class="header-anchor" href="#一-初始化项目" aria-label="Permalink to &quot;一. 初始化项目&quot;">​</a></h3><ol><li>如果是 github 项目</li></ol><ul><li><p>点击起手项目 github 首页 <code>Use this template</code> 按钮 <img src="'+e+'" alt="use this template"></p></li><li><p>填写项目信息，创建项目仓库 <img src="'+n+`" alt="use this template"></p></li><li><p>clone 创建的项目到本地</p></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:xxx/starter-ts.git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 修改项目相关信息并提交</span></span></code></pre></div><ol start="2"><li>如果是私有 Gitlab 项目</li></ol><ul><li>clone 模板到本地</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:antfu/starter-ts.git</span></span></code></pre></div><ul><li><p>修改项目相关信息并提交 commit</p></li><li><p>Gitlab 新建仓库 xxx/xxx.git</p></li><li><p>提交代码到 Gitlab 仓库</p></li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 切换 git remote 为私有repo地址</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> set-url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx/xxx.git</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 新仓库一般为空</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span></code></pre></div><h3 id="二-项目启动、开发" tabindex="-1">二. 项目启动、开发 <a class="header-anchor" href="#二-项目启动、开发" aria-label="Permalink to &quot;二. 项目启动、开发&quot;">​</a></h3><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 安装依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # src/index.ts 新增一行代码 export const three = 3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 构建dev 构建结果如下图 dist/*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><p><img src="`+p+`" alt=""></p><h3 id="三、调试" tabindex="-1">三、调试 <a class="header-anchor" href="#三、调试" aria-label="Permalink to &quot;三、调试&quot;">​</a></h3><ol><li>启动项目</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre></div><ol start="2"><li>包链接到全局(npm / yarn 方式相同)</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 包项目执行</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 输出</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # success Registered &quot;pkg&quot;.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # info You can now run \`yarn link &quot;pkg&quot;\` in the projects where you want to use this package and it will be used instead.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ✨  Done in 0.03s.</span></span></code></pre></div><ol start="3"><li>业务项目中 链接全局包</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span></span></code></pre></div><ol start="4"><li>修改 src/index.ts 代码，验证步骤 2 的项目是否更新。未更新重启 2 项目重试。</li><li>删除 link</li></ol><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 包项目中删除全局链接</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unlink</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 进入依赖项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unlink</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pkg</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # tips: 删除链接后建议重装项目依赖</span></span></code></pre></div>`,32)])])}const m=i(h,[["render",k]]);export{F as __pageData,m as default};
