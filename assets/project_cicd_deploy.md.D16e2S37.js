import{_ as a,o as i,c as n,ae as t}from"./chunks/framework.h0LyDJ8h.js";const o=JSON.parse('{"title":"部署前端到(NG)常用指令","description":"","frontmatter":{},"headers":[],"relativePath":"project/cicd/deploy.md","filePath":"project/cicd/deploy.md"}'),e={name:"project/cicd/deploy.md"};function l(h,s,p,k,d,r){return i(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="部署前端到-ng-常用指令" tabindex="-1">部署前端到(NG)常用指令 <a class="header-anchor" href="#部署前端到-ng-常用指令" aria-label="Permalink to &quot;部署前端到(NG)常用指令&quot;">​</a></h1><h2 id="_1-构建压缩" tabindex="-1">1. 构建压缩 <a class="header-anchor" href="#_1-构建压缩" aria-label="Permalink to &quot;1. 构建压缩&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 构建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 压缩产物</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -czvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist/</span></span></code></pre></div><h2 id="_2-登录并上传资源到服务" tabindex="-1">2. 登录并上传资源到服务 <a class="header-anchor" href="#_2-登录并上传资源到服务" aria-label="Permalink to &quot;2. 登录并上传资源到服务&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 上传 静态资源。xxx替换为实际服务地址，根据实际路径定义。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@xx.xxx.xxx.xxx:/data/web/tmp</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 提示输入服务密码，输入即可。</span></span></code></pre></div><h2 id="_3-登录服务替换资源" tabindex="-1">3. 登录服务替换资源 <a class="header-anchor" href="#_3-登录服务替换资源" aria-label="Permalink to &quot;3. 登录服务替换资源&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 终端登录服务。xxx替换为实际服务地址。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@xx.xxx.xxx.xxx</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 解压资源包，删除当前文件夹中已有的 dist目录，解压二上传的资源。</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/web/temp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -xzvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dist.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除部署的目录内的文件夹，新的资源移动到部署目录。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rm</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -rf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/web/wap/static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/web/tmp/dist/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/web/wap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启 NG 可选，修改配置需重启。</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /usr/local/openresty/nginx/sbin/nginx -s reload</span></span></code></pre></div><h2 id="_4-增加发布-参照-前端增量部署" tabindex="-1">4：增加发布 参照 <a href="./incremental">前端增量部署</a> <a class="header-anchor" href="#_4-增加发布-参照-前端增量部署" aria-label="Permalink to &quot;4：增加发布 参照 [前端增量部署](./incremental.md)&quot;">​</a></h2>`,8)])])}const F=a(e,[["render",l]]);export{o as __pageData,F as default};
